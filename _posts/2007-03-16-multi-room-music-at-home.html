---
layout: post
title: Multi-room music at home
date: '2007-03-16T17:09:00.000Z'
author: Tim Abell
tags: 
modified_time: '2007-03-16T17:45:55.271Z'
blogger_id: tag:blogger.com,1999:blog-5082828566240519947.post-40259322387808297
blogger_orig_url: https://timwise.blogspot.com/2007/03/multi-room-music-at-home.html
---

me and <a href="http://freshmeat.net/projects/slimserver/">slimserver</a><br /><br />Today, I wanted to play music/radio in more than one room, and since BBC Radio 4 was playing The Archers, that ruled out the FM/Radio 4 simple option!<br /><br />So, not liking to do anything the simple way, I set about searching for a way to broadcast sound to multiple rooms, preferably with a UDP/multicast type setup. Didn't manage that in the end, but have got something quite cool running.<br /><br />Initially came across <a href="http://www.fireflymediaserver.org/">firefly</a> media server, from <a href="http://www.linux-magazine.com/issue/77/Firefly_Audio_Streaming.pdf">an article</a> [pdf] in <a href="http://www.linux-magazine.com/">linux magazine</a>. Was put off by its absence from the ubuntu repositories.<br /><br />I have a mate with a <a href="http://www.slimdevices.com/">slimdevice</a>, which is an awesome device. The server side of it is available free as it is OSS, and it is in the ubuntu repo (universe). So install was trivial:<br /><code>sudo apt-get install slimserver</code><br /><br />I could immediately connect with a web browser to http://localhost:9000/ and see the web interface (which is very good), and point any of my media players to http://localhost:9000/stream.mp3 and listen to the selected music. Nice. (Requires mp3 codec support to be installed. See <a href="http://easyubuntu.freecontrib.org/">easyubuntu</a>)<br /><br />Two things tripped me up connecting remotely. I had already spotted "Server Settings / Security /   Allowed IP Addresses" and added my local subnet, but wasn't able to connect from another pc.<br />netstat showed that the server had only bound to the local ip address:<br /><code>$ netstat -tln<br />Active Internet connections (only servers)<br />Proto Recv-Q Send-Q Local Address           Foreign Address         State      <br />...<br />tcp        0      0 127.0.0.1:9000          0.0.0.0:*               LISTEN<br />...<br /></code><br /><br />Through chance I knew about defaults files in ubuntu. Looking in /etc/defaults/slimserver, what do I find? Only bind to localhost. duh!<br /><code>...<br /># This limits http access to the local host.<br /># Comment it out for network-wide access, or change <br /># to enable a single interface.<br />HTTP_ADDR=127.0.0.1<br />...</code><br />So, I commented out the http_addr line, and restarted the slimserver.<br /><code>sudo /etc/init.d/slimserver restart</code><br />Slim server was now listening on *:9000<br /><br />The other thing that tripped me up is that slimserver doesn't multicast, it maintains an independent stream & playlist for each connected device. So when I connected remotely I hadn't added music to the right playlist. In the web based interface there is a drop down list to select which device's playlist you want to modify. Once I figured that out it all worked. Yay. :-)<br /><br />Didn't solve the original problem of playing the same audio simultaneously in multiple rooms, but it's cool nonetheless.