---
layout: post
title: openlayers svn into git
date: '2010-02-04T14:01:00.014Z'
author: Tim Abell
tags:
- git
- openlayers
- svn
modified_time: '2011-05-18T22:12:01.236Z'
blogger_id: tag:blogger.com,1999:blog-5082828566240519947.post-1272986229621647717
blogger_orig_url: https://timwise.blogspot.com/2010/02/openlayers-svn-into-git.html
---

Initial clone:<br /><pre><code>git svn clone -T trunk/openlayers/ -t tags/openlayers/ -b branches/openlayers/ http://svn.openlayers.org/ openlayers.git</code></pre><br />"http://svn.openlayers.org/tags/openlayers/docs-2.8/" is in the wrong place and gets pulled in by the git clone.<br /><br />I should have used <code>--no-follow-parent</code> to avoid the <em>docs-2.8</em> tag pulling in docs history but not going to re-clone now. If you are repeating this, try this instead:<br /><pre><code>git svn clone --no-follow-parent -T trunk/openlayers/ -t tags/openlayers/ -b branches/openlayers/ http://svn.openlayers.org/ openlayers.git<br /></code></pre><br />Find the errant docs branches & eliminate:<br /><pre><code>cd openlayers.git<br />for x in `git for-each-ref --format="%(refname)" 'refs/remotes/tags/docs*'`; do git update-ref -d $x; done<br /></code></pre><br /># <a href="http://dound.com/2009/04/git-forever-remove-files-or-folders-from-history/">http://dound.com/2009/04/git-forever-remove-files-or-folders-from-history/</a><br /># expunge old objects (I think this works)<br /><pre><code>git reflog expire --all<br />git gc --aggressive --prune<br /></code></pre><br />Then run: <a href="http://www.shatow.net/fix-svn-refs.sh">http://www.shatow.net/fix-svn-refs.sh</a> to create real git tags.<br /><br />If you just want the result you can download a copy complete with svn metadata from <a href="http://www.timwise.co.uk/openlayers-dev/openlayers.git.tgz">http://www.timwise.co.uk/openlayers-dev/openlayers.git.tgz</a><br /><br />You will then be able to run <br /><pre><code>git svn fetch<br /></code></pre><br />to get updates from the openlayers svn server.<br /><br />There is a published copy at <a href="http://github.com/timabell/openlayers">http://github.com/timabell/openlayers</a>, though it doesn't have the svn metadata.<br /><br /><hr /><br />I also tackled the docs folder:<br /><br />The docs directory has no matching branch or tag directories, so the following is sufficient:<br /><pre><code>git svn clone -T trunk/doc http://svn.openlayers.org/ openlayers-doc.git<br />git gc --aggressive --prune<br /></code></pre><br />You can download this from <a href="http://www.timwise.co.uk/openlayers-dev/openlayers-doc.git.tgz">http://www.timwise.co.uk/openlayers-dev/openlayers-doc.git.tgz</a><br /><br /><hr /><br />Anything else I come up with will end up at <a href="http://www.timwise.co.uk/openlayers-dev/">http://www.timwise.co.uk/openlayers-dev/</a>