---
layout: post
title: 5 ways to make your database better - by Tim Abell
description: Step up your database game with these top tips.
category: blog
---

<h2>[1] Documentation</h2>

<p>Shoot me okay, but maintenance of software is [insert large number here]
  times the cost of creation, especially with relational databases. You are a
  pro working for a client, you owe it to them to make it possible for them to
  have future staff (and yourself!) be as effective as possible. You put all
  that effort into figuring out why a column should exist and have that name,
now share that knowledge before you move on to the next greenfield project</p>

<ul>
  <li>
    <a target="_blank"
      href="https://www.red-gate.com/products/sql-development/sql-doc/">Redgate
      SqlDoc</a> is great for rapidly adding missing documentation.
  </li>
  <li>
    <a target="_blank" href="http://schemaspy.org/">SchemaSpy</a> generates
    static html sites making it easy to see what documentation there is (or
    isn't!) and share it with the team. It's free &amp; open source (although a
    bit fiddly to set up and run). It has particularly nice clickable diagrams.
  </li>
  <li>
    <a target="_blank"
       href="https://dataedo.com/tutorials/getting-started/generating-database-documentation">
      Dataedo generates static html sites &amp; pdfs</a> as well, and is
    commercial and slicker than SchemaSpy
  </li>
 <li>
    This <a target="_blank"
      href="https://gist.github.com/timabell/6fbd85431925b5724d2f">gist for
      source-controlling ms_description attributes</a> gives you a two-way
    source-controllable / editable list of your documentation in SQL Server
  </li>
  <li>
    <a target="_blank" href="http://schemaexplorer.io/">SQL Schema Explorer</a>
    generates dynamic html sites making it easy to see what documentation there is
    and share it with the team.
  </li>
</ul>

<h2>[2] Refactor your database</h2>

<p>Migrations are a thing now. Use them. You refactor your code, why wouldn't
  you refactor your database? Stop leaving landmines for future people -
  misleading names, bad structures etc. Use the redgate tools (ready-roll etc),
  use your orm’s tools (EF migrations, active record migrations). Yes you have
  to deal with data, but it’s the exception not the rule that it’s going to
take hours to run because of data volumes.</p>

<ul>
  <li>
    <a target="_blank" href="https://www.red-gate.com/products/sql-development/sql-change-automation/">Redgate's
      SQL Change Automation</a>
    (formerly <a target="_blank" href="https://www.red-gate.com/blog/working/from-release-engineer-to-readyroll-founder-and-redgate-product-manager">ReadyRoll</a>)
    is an opinionated tool for creating and running database migrations, it
    even generates Database Administrator (DBA) friendly pure-sql deployment
    packages. Very impressive!
  </li>
  <li>
    <a target="_blank" href="https://documentation.red-gate.com/soc6/common-tasks/working-with-migration-scripts">Redgate's SQL Source Control supports migrations</a>
  </li>
  <li>
    I've been using <a target="_blank" href="https://docs.microsoft.com/en-us/ef/core/managing-schemas/migrations/">EF Core migrations</a> recently and they work well. There are equivalents for all the major platforms.
  </li>
</ul>


<h2>[3] Enforce data integrity</h2>

<p>Does your app fall over if the data is bad? Databases have many powerful
  ways of enforcing the rules your code relies on: nullability, foreign keys,
  <a target="_blank" href="https://www.w3schools.com/SQL/sql_check.asp">check constraints</a>,
  unique constraints. Stop the bad data before it even gets in there. Now your
  database is enforcing these rules your code doesn't have to handle violations
of them when reading data because they'll never happen</p>

<h2>[4] Integration testing</h2>

<p>You have an ORM. Great. You have unit tests. Great. But where the rubber
  hits the road and your code sends SQL to a real database it breaks at runtime
  more often than you’d like to admit because the generated sql didn't jive
  with the real database structure or data in some obscure fashion. Automate
  the creation/test/destruction of your db and run full end to end integration
  tests.  I suggest automating from the layer below the UI to keep the tests
  fast. There are many techniques for keeping the tests quick but still
  realistic: do end to end smoke tests instead of individual pieces, use an
  in-memory database, use
  <a target="_blank" href="https://gist.github.com/timabell/3164291#file-create-snapshot-sql">database snapshots</a>
  or the fancy <a target="_blank" href="https://www.red-gate.com/products/dba/sql-clone/index">sql-clone</a>
  tool from Redgate to make creation / rollback virtually instant. Can you pull
  realistic (anonymised) data from production? Better still, now you’ll catch a
  whole new class of bugs before they hit prod.</p>

<ul>
  <li>
    Here's
    <a target="_blank" href="https://www.red-gate.com/simple-talk/sql/sql-tools/continuous-integration-for-databases-using-red-gate-tools/">a guide from Redgate detailing one way to do continuous integration testing with databases</a>
  </li>
</ul>


<h2>[5] Make it visible</h2>

<p>Are the only people that can see the database structures the coders and
DBAs? do the business owners, support people, Quality Assurance (QA) people find it a mystery? You
should be just as proud of your database as you are of your code, by shining a
light on this dark corner of your digital estate you can make it as good as it
should be, not an embarrassing backwater. By sharing the database in an
accessible form to the non-coders in your team you can help them be more
effective in their jobs.</p>

<ul>
  <li>
    The html generated by <a target="_blank" href="http://schemaspy.org/">SchemaSpy</a>
    can be shared on any webserver to let your whole team see your schema
    structures
  </li>
  <li>
    <a target="_blank" href="http://schemaexplorer.io/">SQL Schema Explorer</a> can be run on
    your network or cloud hosting (<a
    target="_blank" href="https://hub.docker.com/r/timabell/sdv/">schema explorer is
  dockerized</a>!) to give your team easy access to both the schema and data
within the database.
  </li>
</ul>

<p>Combine these tools with a continuous integration system and you have easy
  access to the bleeding edge of your databases development.</p>

<h2>Take action now!</h2>

<ol>
  <li>
    Make a start on at least one of these improvements today.
  </li>
  <li>
    Share this article with your team - get everyone motivated to improve.
  </li>
  <li>
    Share this article on social media - help spread the word that our databases deserve better!
  </li>
</ol>

<p>I hope this has inspired you to make an improvement in the often unloved
  underbelly of your applications.
</p>

<p>
  What do you think needs improving in the way we deal with databases?
  What change did you make because of this?
  <a href="mailto:articles@timwise.co.uk?subject=making better databases">Let me know!</a>
  </p>

Originally posted at <a href="http://schemaexplorer.io/blog/2018/07/10/5-ways-to-make-your-database-better.html">http://schemaexplorer.io/blog/2018/07/10/5-ways-to-make-your-database-better.html</a>
